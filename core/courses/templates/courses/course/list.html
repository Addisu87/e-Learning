{% extends "base.html" %}

{% block title %}
  {% if subject %}
    {{ subject.title }} courses
  {% else %}
    All courses
  {% endif %}
{% endblock %}

{% block content %}
  <div class="container mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6">
      {% if subject %}
        {{ subject.title }} courses
      {% else %}
        All courses
      {% endif %}
    </h1>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
      <div class="col-span-1">
        <h3 class="text-xl font-semibold mb-4">Subjects</h3>
        <ul id="modules" class="space-y-2">
          <li {% if not subject %} class="font-bold text-blue-600"{% else %}class="text-gray-700"{% endif %}>
            <a href="{% url "course_list" %}" class="hover:underline">All</a>
          </li>
          {% for sbj in subjects %}
            <li {% if subject == sbj %}class="font-bold text-blue-600"{% else %}class="text-gray-700"{% endif %}>
              <a href="{% url "course_list_subject" sbj.slug %}" class="hover:underline">
                {{ sbj.title }}
                <br>
                <span class="text-sm text-gray-500">
                  {{ sbj.total_courses }} course{{ sbj.total_courses|pluralize }}
                </span>
              </a> 
            </li>
          {% endfor %}
        </ul>
      </div>
      <div class="col-span-3">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {% for course in courses %}
            <div class="bg-white p-6 rounded-lg shadow-md">
              {% with subject=course.subject %}
                <h3 class="text-xl font-semibold mb-2">
                  <a href="{% url 'course_detail' course.slug %}" class="hover:underline text-blue-600">
                    {{ course.title }}
                  </a>
                </h3> 
                <p class="text-gray-700">
                  <a href="{% url "course_list_subject" subject.slug %}" class="text-gray-500 hover:underline">{{ subject }}</a>.
                  {{ course.total_modules }} modules.
                  Instructor: {{ course.owner.get_full_name }}
                </p>
              {% endwith %}
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
